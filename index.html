<style>
.icon-button {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  background-color: #4CAF50;
  color: white;
  padding: 10px 16px;
  margin: 8px 0;
  border: none;
  border-radius: 30px;
  font-size: 16px;
  cursor: pointer;
  transition: 0.3s;
}
.icon-button:hover {
  background-color: #45a049;
}
.icon-button img {
  width: 24px;
  height: 24px;
}
</style>

<script>
const faqs = {
  "sip kya hota hai": "SIP ka matlab hai Systematic Investment Plan, jisme aap fixed amount regular invest karte hain.",
  "mutual fund kya hota hai": "Mutual fund me log apna paisa ek saath lagate hain aur expert usse manage karta hai.",
  "growfin services": "GrowFin Wealth SIP planning, mutual funds, retirement aur goal planning me madad karta hai.",
  "elss fund kya hai": "ELSS tax saving mutual fund hai jisme 3 saal ka lock-in period hota hai aur tax benefit milta hai."
};

function sendMessage() {
  let input = document.getElementById("userInput");
  let userText = input.value.trim();
  if (!userText) return;
  addMessage(userText, "user");
  input.value = "";
  botThinking();
  setTimeout(() => {
    let reply = "üôè Maaf kijiye, mujhe iske baare me jaankari nahi hai.";
    let found = false;

    for (let key in faqs) {
      if (userText.toLowerCase().includes(key)) {
        reply = faqs[key];
        found = true;
        break;
      }
    }

    // Check for calculator related queries
    if (!found && (
        userText.toLowerCase().includes("calculator") ||
        userText.toLowerCase().includes("invest") ||
        userText.toLowerCase().includes("kitna") ||
        userText.toLowerCase().includes("goal planning") ||
        userText.toLowerCase().includes("sip")
      )) {
      reply = "Aap apne investment planning ke liye Calculator ka use kar sakte hain!";
      botReply(reply);
      showCalculatorButton();
      return;
    }

    // Check for more information
    if (!found && (
        userText.toLowerCase().includes("more") ||
        userText.toLowerCase().includes("details") ||
        userText.toLowerCase().includes("jaankari") ||
        userText.toLowerCase().includes("contact")
      )) {
      reply = "Aur jaankari ke liye neeche button dabaiye.";
      botReply(reply);
      showKnowMoreButton();
      return;
    }

    botReply(reply);
    showFAQOptions();
  }, 1000);
}

function showCalculatorButton() {
  const quickReplies = document.getElementById("quickReplies");
  quickReplies.innerHTML = "";
  quickReplies.style.display = 'flex';

  const btn = document.createElement("button");
  btn.className = "icon-button";
  btn.innerHTML = `<img src="https://cdn-icons-png.flaticon.com/512/833/833472.png" alt="Calculator"> Calculator Dekhein`;

  btn.onclick = () => {
    botReply("Yeh raha aapka Calculator! üìä");
    document.getElementById("calculatorSection").style.display = 'block';
    document.getElementById("contactButtons").style.display = 'block';
    document.getElementById("quickReplies").style.display = 'none';
  };
  quickReplies.appendChild(btn);
}

function showKnowMoreButton() {
  const quickReplies = document.getElementById("quickReplies");
  quickReplies.innerHTML = "";
  quickReplies.style.display = 'flex';

  const btn = document.createElement("button");
  btn.className = "icon-button";
  btn.innerHTML = `<img src="https://cdn-icons-png.flaticon.com/512/1828/1828817.png" alt="Info"> Contact aur Details`;

  btn.onclick = () => {
    botReply("Aap hume contact kar sakte hain ya form bhar sakte hain! ‚ú®");
    document.getElementById("contactButtons").style.display = 'block';
    document.getElementById("quickReplies").style.display = 'none';
  };
  quickReplies.appendChild(btn);
}

function botThinking() {
  addMessage("‚è≥ FinFlora soch rahi hai...", "bot");
}

function botReply(text) {
  addMessage(text, "bot");
}

function addMessage(text, sender) {
  const messages = document.getElementById("messages");
  const div = document.createElement("div");
  div.className = "message " + sender;
  div.innerText = text;
  messages.appendChild(div);
  messages.scrollTop = messages.scrollHeight;
}

document.getElementById("userInput").addEventListener("keypress", function(e) {
  if (e.key === "Enter") {
    sendMessage();
  }
});
</script>
